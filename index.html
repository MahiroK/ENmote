<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>ENmoteï½œã“ã“ã‚ã®å¤©æ°—äºˆå ±</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: "Arial", sans-serif;
        /* è™¹è‰²ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ */
        background: linear-gradient(
          120deg,
          #ff9a9e,
          #fad0c4,
          #fbc2eb,
          #a6c1ee,
          #84fab0,
          #8fd3f4,
          #a1c4fd,
          #ffecd2
        );
        background-size: 400% 400%;
        background-attachment: fixed;
        animation: rainbowShift 22s ease infinite;
        color: #0354ce;
        margin: 0;
        padding: 2rem;
        text-align: center;
        display: flex; /* ä¸­å¤®å¯„ã›ã®ãŸã‚ã«è¿½åŠ  */
        justify-content: center; /* æ°´å¹³æ–¹å‘ã®ä¸­å¤®å¯„ã› */
        align-items: center; /* å‚ç›´æ–¹å‘ã®ä¸­å¤®å¯„ã› */
        flex-direction: column; /* è¦ç´ ã‚’ç¸¦ã«ä¸¦ã¹ã‚‹ */
        height: 100vh; /* ç”»é¢å…¨ä½“ã‚’å ã‚ã‚‹ */
      }

      @keyframes rainbowShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* å‹•ãã‚’æŠ‘ãˆãŸã„OSè¨­å®šã«å¾“ã† */
      @media (prefers-reduced-motion: reduce) {
        body {
          animation: none;
        }
      }
      h1 {
        margin-bottom: 1rem;
        line-height: 1.2;
      }
      h1 .brand {
        font-size: clamp(3rem, 7.5vw, 4rem);
        font-weight: 800;
        display: inline-block;
      }
      h1 .tagline {
        font-size: 0.9rem;
        font-weight: 500;
      }
      .callout {
        display: inline-block;
        padding: 0.6rem 1.1rem;
        margin: 0.4rem 0 0.2rem;
        background: rgba(255, 255, 255, 0.78);
        color: #0354ce;
        border-radius: 9999px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        backdrop-filter: saturate(120%) blur(2px);
      }
      #bubble {
        width: 150px;
        height: auto; /* é«˜ã•ã‚’è‡ªå‹•ã«ã—ã¦ aspect-ratio ã«ä»»ã›ã‚‹ */
        aspect-ratio: 1 / 1; /* æ­£æ–¹å½¢ã‚’ç¶­æŒ */
        border-radius: 50%;
        border: 3px solid rgba(0, 0, 0, 0.1);
        background: transparent;
        margin: 2rem auto;
        box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.5),
          0 0 8px rgba(173, 216, 230, 0.5);
        cursor: pointer;
        transition: box-shadow 0.3s ease, background 0.3s ease;
        position: relative; /* è¦ªè¦ç´ ã®å½±éŸ¿ã‚’æ’é™¤ */
      }
      #bubble:hover {
        box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.7),
          0 0 12px rgba(173, 216, 230, 0.8);
      }
      #colorPicker,
      #noteInput,
      #saveBtn,
      #resetBtn {
        display: none;
      }
      input[type="color"] {
        width: 0;
        height: 0;
        opacity: 0;
        visibility: hidden;
      }
      textarea {
        width: 80%; /* å›ºå®šå¹… */
        max-width: 800px; /* æœ€å¤§å¹…ã‚’è¨­å®š */
        height: 100px; /* å›ºå®šé«˜ã• */
        margin: 1rem auto; /* è‡ªå‹•ã§ä¸­å¤®å¯„ã› */
        padding: 0.5rem;
        border-radius: 8px;
        border: 1px solid #ccc;
        resize: none; /* ã‚µã‚¤ã‚ºå¤‰æ›´ã‚’ç„¡åŠ¹åŒ– */
        box-sizing: border-box; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å«ã‚ãŸå¹…ã¨é«˜ã•ã‚’è¨ˆç®— */
      }
      button {
        padding: 0.7rem 1.5rem;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        background: #7dcfb6;
        color: white;
        cursor: pointer;
        margin: 0.5rem;
      }
      .entry {
        background: #fff;
        padding: 1.5rem; /* ä½™ç™½ã‚’åºƒã’ã‚‹ */
        border-radius: 10px;
        margin: 1rem auto;
        width: 95%; /* æ¨ªå¹…ã‚’åºƒã’ã‚‹ */
        max-width: 800px; /* æœ€å¤§å¹…ã‚’è¨­å®š */
        min-height: 120px; /* æœ€ä½é™ã®é«˜ã•ã‚’å°‘ã—å¢—ã‚„ã™ */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        text-align: left;
        position: relative;
        line-height: 1.6; /* è¡Œé–“ã‚’åºƒã’ã‚‹ */
        word-wrap: break-word; /* é•·ã„å˜èªã‚„URLã‚’æŠ˜ã‚Šè¿”ã™ */
      }
      .color-dot {
        display: inline-block;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        margin-right: 0.5rem;
        vertical-align: middle;
      }
      .date {
        font-size: 0.9rem;
        color: #666;
      }
      .note {
        margin-top: 0.5rem;
      }
      .deleteBtn {
        position: absolute;
        bottom: 10px;
        right: 10px;
        background: #f76c6c;
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
      }
      .talkBtn {
        margin-top: 0.8rem;
        display: inline-block;
        font-size: 0.9rem;
        color: #4a90e2;
        text-decoration: underline;
        cursor: pointer;
      }
      #enmoteBtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #a2d2ff;
        color: white;
        border: none;
        border-radius: 50px;
        padding: 0.8rem 1.2rem;
        font-size: 1rem;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 100;
      }
    </style>
  </head>
  <body>
    <h1>
      <span class="brand">ğŸ«§ ENmote</span><br />
      <span class="tagline">è‰²ã§æ„Ÿã˜ã€è¨€è‘‰ã§å¯„ã‚Šæ·»ã†ã€‚ã“ã“ã‚ã®ç©ºã‚’æ˜ ã—å‡ºã™ç¿»è¨³AIãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼</span>
    </h1>
    <p class="callout">ã‚·ãƒ£ãƒœãƒ³ç‰ã«ã€ä»Šæ—¥ã®è‰²ã‚’æ˜ ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ</p>

    <div id="bubble" onclick="openPicker()"></div>
    <input type="color" id="colorPicker" onchange="colorSelected()" />
    <textarea
      id="noteInput"
      placeholder="æŒ¯ã‚Šè¿”ã‚Šã®ã²ã¨ã“ã¨ãƒ¡ãƒ¢ã‚’æ®‹ã™ã“ã¨ã‚‚ã§ãã¾ã™"
    ></textarea
    ><br />
    <button id="saveBtn" onclick="saveEntry()">è¨˜éŒ²ã™ã‚‹</button>
    <button id="resetBtn" onclick="resetColor()">æˆ»ã‚‹</button>

    <h2>ğŸ—“ï¸ éå»ã®è¨˜éŒ²</h2>
    <div id="entries"></div>

    <button id="enmoteBtn" onclick="talkToENmote()">
      ENmoteã¨è©±ã™ï¼ˆãƒã‚¤GPTã«é·ç§»ã—ã¾ã™ï¼‰
    </button>

    <script>
      const bubble = document.getElementById("bubble");
      const colorPicker = document.getElementById("colorPicker");
      const noteInput = document.getElementById("noteInput");
      const saveBtn = document.getElementById("saveBtn");
      const resetBtn = document.getElementById("resetBtn");

      function openPicker() {
        colorPicker.click();
      }

      function colorSelected() {
        const color = colorPicker.value;
        bubble.style.background = color;
        noteInput.style.display = "block";
        saveBtn.style.display = "inline-block";
        resetBtn.style.display = "inline-block";
      }

      function resetColor() {
        bubble.style.background = "transparent";
        noteInput.style.display = "none";
        saveBtn.style.display = "none";
        resetBtn.style.display = "none";
        colorPicker.value = "#ffffff";
        noteInput.value = "";
      }

      function saveEntry() {
        const color = colorPicker.value;
        const note = noteInput.value;
        const date = new Date().toLocaleDateString("ja-JP", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
        });

        const entry = { color, note, date };
        const existing = JSON.parse(localStorage.getItem("emotionLog")) || [];
        existing.unshift(entry);
        localStorage.setItem("emotionLog", JSON.stringify(existing));
        resetColor();
        renderEntries();
      }

      function deleteEntry(index) {
        const existing = JSON.parse(localStorage.getItem("emotionLog")) || [];
        existing.splice(index, 1);
        localStorage.setItem("emotionLog", JSON.stringify(existing));
        renderEntries();
      }

      function renderEntries() {
        const container = document.getElementById("entries");
        container.innerHTML = "";
        const entries = JSON.parse(localStorage.getItem("emotionLog")) || [];

        entries.forEach((entry, index) => {
          const colorParam = encodeURIComponent(entry.color);
          const noteParam = encodeURIComponent(entry.note || "");
          const gptUrl = `https://chatgpt.com/g/g-68bbf302e6b08191a562d2cbcacdd3a7-enmote`;

          const div = document.createElement("div");
          div.className = "entry";

          const copyText = `è‰²: ${entry.color}\nãƒ¡ãƒ¢: ${
            entry.note || "(ãªã—)"
          }`;

          div.innerHTML = `
      <div><span class="color-dot" style="background:${entry.color}"></span>
        <strong>${entry.color}</strong>
      </div>
      <div class="date">ğŸ“… ${entry.date}</div>
      ${entry.note ? `<div class="note">ğŸ’¬ ${entry.note}</div>` : ""}
      <div class="talkBtn" onclick="window.open('${gptUrl}', '_blank')">ğŸ’¬ ENmoteã«è©±ã—ã‹ã‘ã‚‹</div>

      <div style="margin-top: 0.5rem; font-size: 0.9rem; color: #555;">
        ğŸ“‹ ã‚³ãƒ”ãƒ¼ã—ã¦ENmoteã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š
        <pre style="background:#f0f0f0;padding:0.5rem;border-radius:6px;margin-top:0.2rem;">${copyText}</pre>
        <button onclick="navigator.clipboard.writeText(\`${copyText}\`).then(() => { 
          alert('ã‚³ãƒ”ãƒ¼ãŒå®Œäº†ã—ã¾ã—ãŸï¼'); 
        }).catch(err => { 
          alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + err); 
        })">ğŸ“ ã‚³ãƒ”ãƒ¼</button>
      </div>

      <button class="deleteBtn" onclick="deleteEntry(${index})">å‰Šé™¤</button>
    `;

          container.appendChild(div);
        });
      }

      function talkToENmote() {
        window.open(
          "https://chatgpt.com/g/g-68bbf302e6b08191a562d2cbcacdd3a7-enmote"
        );
      }

      renderEntries();
    </script>
  </body>
</html>
